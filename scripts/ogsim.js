!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function k(){h&&i&&(h=!1,i.length?g=i.concat(g):j=-1,g.length&&l())}function l(){if(!h){var a=e(k);h=!0;for(var b=g.length;b;){for(i=g,g=[];++j<b;)i&&i[j].run();j=-1,b=g.length}i=null,h=!1,f(a)}}function m(a,b){this.fun=a,this.array=b}function n(){}var e,f,d=b.exports={};!function(){try{e=setTimeout}catch(a){e=function(){throw new Error("setTimeout is not defined")}}try{f=clearTimeout}catch(a){f=function(){throw new Error("clearTimeout is not defined")}}}();var i,g=[],h=!1,j=-1;d.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];g.push(new m(a,b)),1!==g.length||h||e(l,0)},m.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=n,d.addListener=n,d.once=n,d.off=n,d.removeListener=n,d.removeAllListeners=n,d.emit=n,d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],2:[function(a,b,c){"use strict";var d=["h","min","s","ms","\u03bcs","ns"],e=["hour","minute","second","millisecond","microsecond","nanosecond"],f=[3600,60,1,1e6,1e3,1];b.exports=function(a,b){var c,g,h,i,j,k,l,m,n;if(c=!1,g=!1,b&&(c=b.verbose||!1,g=b.precise||!1),!Array.isArray(a)||2!==a.length)return"";if("number"!=typeof a[0]||"number"!=typeof a[1])return"";for(n="",h=0;6>h&&(i=3>h?0:1,j=a[i],3!==h&&0!==h&&(j%=f[h-1]),2===h&&(j+=a[1]/1e9),k=j/f[h],!(k>=1)||(c&&(k=Math.floor(k)),g?m=k.toString():(l=k>=10?0:2,m=k.toFixed(l)),m.indexOf(".")>-1&&"0"===m[m.length-1]&&(m=m.replace(/\.?0+$/,"")),n&&(n+=" "),n+=m,c?(n+=" "+e[h],"1"!==m&&(n+="s")):n+=" "+d[h],c));h++);return n}},{}],3:[function(a,b,c){(function(b){b.OgsimBattle=a("./ogsim/battle")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ogsim/battle":5}],4:[function(a,b,c){var d=function(){this.ap=0,this.sp=0,this.sh=0};d.prototype.reset=function(){this.ap=0,this.sp=0,this.sh=0},b.exports=d},{}],5:[function(a,b,c){var d=a("./timer"),e=a("./config"),f=a("./group"),g=a("./roundstatistics"),h=a("./attackstatistics"),j=(a("./tools"),function(a,b,c,i){this.timer=new d(a,b),this.timer.start("battle"),this.timer.start("init"),this.attGroup=new f(a,e.pricelist,e.rapidfire),this.dfGroup=new f(b,e.pricelist,e.rapidfire),this.report=new g(this.attGroup,this.dfGroup),this.attstats=new h,this.dfstats=new h,this.afterFunction=i,this.handleRounds()});j.prototype.handleRounds=function(a){this.init(),this.battle()},j.prototype.init=function(){this.timer.start("expand_att"),this.attGroup.expand(),this.timer.end("expand_att"),this.timer.start("expand_df"),this.dfGroup.expand(),this.timer.end("expand_df"),this.report.init(this.attstats,this.dfstats),this.timer.end("init")},j.prototype.battle=function(){for(var b,a=this,c=1;;){if(this.attGroup.expandedFleet.length||(console.log("Attackers do not have operational ships, in round "+c),b=!0),this.dfGroup.expandedFleet.length||(console.log("Defenders do not have operational ships, in round "+c),b=!0),b)break;if(a.timer.start("battle_round_"+c),a.attGroup.attack(a.dfGroup,a.attstats),a.dfGroup.attack(a.attGroup,a.dfstats),a.timer.end("battle_round_"+c),a.timer.start("battle_clean_"+c),a.attGroup.clean(),a.dfGroup.clean(),a.timer.end("battle_clean_"+c),a.report.update(c),a.attstats.reset(),a.dfstats.reset(),c++,c>6)break}a.timer.end("battle"),a.timer.buildResults(),a.afterFunction&&a.afterFunction(a.timer.records,a.report.results)},b.exports=j},{"./attackstatistics":4,"./config":6,"./group":9,"./roundstatistics":11,"./timer":12,"./tools":13}],6:[function(a,b,c){c.pricelist={1:{id:"1",name:"planet",metal:0,crystal:0,deuterium:0,size:0,position:null},2:{id:"2",name:"moon",metal:0,crystal:0,deuterium:0,size:0,position:null},3:{id:"3",name:"debris",metal:0,crystal:0,deuterium:0,size:0,position:null},109:{id:"109",name:"military_tech"},110:{id:"110",name:"defense_tech"},111:{id:"111",name:"hull_tech"},202:{id:"202",name:"small_cargo",metal:2e3,crystal:2e3,deuterium:0,energy:0,factor:1,consumption:10,speed:5e3,capacity:5e3,attack:5,defense:10,hull:4e3,motor:115,motor2:{117:4},speed2:1e4,consumption2:20},203:{id:"203",name:"large_cargo",metal:6e3,crystal:6e3,deuterium:0,energy:0,factor:1,consumption:50,speed:8e3,capacity:25e3,attack:5,defense:25,hull:12e3,motor:115},204:{id:"204",name:"light_fighter",metal:3e3,crystal:1e3,deuterium:0,energy:0,factor:1,consumption:20,speed:12500,capacity:50,attack:50,defense:10,hull:4e3,motor:115},205:{id:"205",name:"heavy_fighter",metal:6e3,crystal:4e3,deuterium:0,energy:0,factor:1,consumption:75,speed:1e4,capacity:100,attack:150,defense:25,hull:1e4,motor:117},206:{id:"206",name:"cruiser",metal:2e4,crystal:7e3,deuterium:2e3,energy:0,factor:1,consumption:300,speed:15e3,capacity:800,attack:400,defense:50,hull:27e3,motor:117},207:{id:"207",name:"battle_ship",metal:45e3,crystal:15e3,deuterium:0,energy:0,factor:1,consumption:500,speed:1e4,capacity:1500,attack:1e3,defense:200,hull:6e4,motor:118},208:{id:"208",name:"colony_ship",metal:1e4,crystal:2e4,deuterium:1e4,energy:0,factor:1,consumption:1e3,speed:2500,capacity:7500,attack:50,defense:100,hull:3e4,motor:117},209:{id:"209",name:"recycler",metal:1e4,crystal:6e3,deuterium:2e3,energy:0,factor:1,consumption:300,speed:2e3,capacity:2e4,attack:1,defense:10,hull:16e3,motor:115},210:{id:"210",name:"esp_probe",metal:0,crystal:1e3,deuterium:0,energy:0,factor:1,consumption:1,speed:1e6,capacity:5,attack:.01,defense:.01,hull:1e3,motor:115},211:{id:"211",name:"bomber_ship",metal:5e4,crystal:25e3,deuterium:15e3,energy:0,factor:1,consumption:1e3,speed:4e3,capacity:500,attack:1e3,defense:500,hull:75e3,motor:117,motor2:{118:7},speed2:5e3},212:{id:"212",name:"solar_sat",metal:0,crystal:2e3,deuterium:500,energy:0,factor:1,consumption:0,speed:0,capacity:0,attack:1,defense:1,hull:2e3,motor:-1},213:{id:"213",name:"destroyer",metal:6e4,crystal:5e4,deuterium:15e3,energy:0,factor:1,consumption:1e3,speed:5e3,capacity:2e3,attack:2e3,defense:500,hull:11e4,motor:118},214:{id:"214",name:"death_star",metal:5e6,crystal:4e6,deuterium:1e6,energy:0,factor:1,consumption:1,speed:100,capacity:1e6,attack:2e5,defense:5e4,hull:9e6,motor:118},215:{id:"215",name:"battle_cruiser",metal:3e4,crystal:4e4,deuterium:15e3,energy:0,factor:1,consumption:250,speed:1e4,capacity:750,attack:700,defense:400,hull:7e4,motor:118},401:{id:"401",name:"rocket_launcher",metal:2e3,crystal:0,deuterium:0,energy:0,factor:1,attack:80,defense:20,hull:2e3},402:{id:"402",name:"light_laser",metal:1500,crystal:500,deuterium:0,energy:0,factor:1,attack:100,defense:25,hull:2e3},403:{id:"403",name:"heavy_laser",metal:6e3,crystal:2e3,deuterium:0,energy:0,factor:1,attack:250,defense:100,hull:8e3},404:{id:"404",name:"gauss_cannon",metal:2e4,crystal:15e3,deuterium:2e3,energy:0,factor:1,attack:1100,defense:200,hull:35e3},405:{id:"405",name:"ion_cannon",metal:2e3,crystal:6e3,deuterium:0,energy:0,factor:1,attack:150,defense:500,hull:8e3},406:{id:"406",name:"plasma_turret",metal:5e4,crystal:5e4,deuterium:3e4,energy:0,factor:1,attack:3e3,defense:300,hull:1e5},407:{id:"407",name:"small_shield_dome",metal:1e4,crystal:1e4,deuterium:0,energy:0,factor:1,attack:1,defense:2e3,hull:2e4},408:{id:"408",name:"large_shield_dome",metal:5e4,crystal:5e4,deuterium:0,energy:0,factor:1,attack:1,defense:1e4,hull:1e5},502:{id:"502",name:"antiballistic_missile",metal:8e3,crystal:2e3,deuterium:0,energy:0,factor:1,attack:1,defense:1,hull:8e3},503:{id:"503",name:"interplanetary_missile",metal:12500,crystal:2500,deuterium:1e4,energy:0,factor:1,attack:12e3,defense:1,hull:15e3}},c.rapidfire={202:{210:5,212:5},203:{210:5,212:5},204:{210:5,212:5},205:{210:5,212:5,203:3},206:{210:5,212:5,204:6,401:10},207:{210:5,212:5},208:{210:5,212:5},209:{210:5,212:5},210:{},211:{210:5,212:5,401:120,402:120,403:10,405:10},212:{},213:{210:5,212:5,215:3,402:10},214:{210:1250,212:1250,202:250,203:250,204:200,205:100,206:33,207:30,208:250,209:250,211:25,213:5,215:15,401:200,402:200,403:100,404:50,405:100},215:{202:3,203:3,206:5,207:8}},c.lang={}},{}],7:[function(a,b,c){var d=a("./resource"),e=a("./fleetunittype"),f=a("./tools"),g=function(a,b,c,f,g,h,i){var j,k;this.player_id=i,this.d=1+.1*f,this.s=1+.1*g,this.h=.1*(1+.1*h),this.unitTypes={};for(var m in a)a.hasOwnProperty(m)&&(j=a[m],k=new d(b[m],c),ft=new e(k,j,this.d,this.s,this.h),this.unitTypes[m]=ft)};g.prototype.expandTo=function(a){var b,c,d=f.appendToArray;for(var e in this.unitTypes)this.unitTypes.hasOwnProperty(e)&&(c=this.unitTypes[e],b=[c.h,c.s,c],d(a,b,c.m))},g.prototype.compress=function(){var a,b;for(var c in this.unitTypes);return{capacity:a,fleet:b}},g.prototype.buildReport=function(){},g.prototype.getStats=function(){var b,c,a=[];for(var d in this.unitTypes)this.unitTypes.hasOwnProperty(d)&&(c=this.unitTypes[d],c.x!=c.m&&(b={id:d,difference:c.m-c.x,military_tech:c.d,defense_tech:c.s,hull_tech:c.h},a.push(b)));return a},b.exports=g},{"./fleetunittype":8,"./resource":10,"./tools":13}],8:[function(a,b,c){var d=function(a,b,c,d,e){this.x=0,this.m=b,this.i=a.id,this.resource=a,this.rf={},this.simulations=[],this.calcProperties(c,d,e)};d.prototype.calcProperties=function(a,b,c){this.d=a*this.resource.attack,this.s=b*this.resource.defense,this.h=c*this.resource.hull,this.rf=this.resource.rapidFire},d.prototype.calcCapacity=function(){var a=this.m-this.x;return a?this.resource.capacity*a:!1},d.prototype.logBattle=function(){this.simulations.push(this.m-this.x)},b.exports=d},{}],9:[function(a,b,c){var d=a("./fleet"),f=(a("./tools"),function(a,b,c){var e;this.fleets=[],this.expandedFleet=[];for(var f=0;f<a.length;f++)e=new d(a[f].fleet,b,c,a[f].military_tech,a[f].defense_tech,a[f].hull_tech,a[f].player_id),this.fleets.push(e);this.fleetdataList=a});f.prototype.expand=function(){for(var c,b=0;b<this.fleets.length;b++)c=this.fleets[b],c.expandTo(this.expandedFleet)},f.prototype.clean=function(){var b,c,a=[],d=this.expandedFleet.length;for(c=0;d>c;c++)b=this.expandedFleet[c],b[0]?(b[1]=b[2].s,a.push(b)):b=null;this.expandedFleet=a},f.prototype.attack=function(a,b){var m,c=a.expandedFleet.length,d=null,e=0,f=0,g=null,h=0,i=null,j=null,k=0,l=0,n=-1,o=!0;for(m=b.sh=this.expandedFleet.length;++n<m;){g=this.expandedFleet[n],d=g[2],e=d.d,f=100*e,o=!0;do b.ap=b.ap+e,h=Math.random()*c|0,i=a.expandedFleet[h],j=i[2],i[0]&&(f>i[2].s?e>i[1]?(k=e-i[1],b.sp=b.sp+i[1],i[1]=0,k<i[0]?(i[0]=i[0]-k,l=i[0]/j.h,.7>l&&Math.random()<1-l&&(i[0]=0,j.x=j.x+1)):(i[0]=0,j.x=j.x+1)):(i[1]=i[1]-e,b.sp=b.sp+e):(b.sp=b.sp+e,o=!1)),d.rf[j.i]&&Math.random()<d.rf[j.i]?b.sh=b.sh+1:o=!1;while(o)}},f.prototype.getReports=function(){},b.exports=f},{"./fleet":7,"./tools":13}],10:[function(a,b,c){var d=function(a,b){this.id=a.id,this.name=a.name,this.rapidFire={},"1"==this.id||"2"==this.id||"3"==this.id?this.initializeLocation(a):d.getDefenseTypes().indexOf(this.id)>-1?this.initializeDefense(a):d.getShipTypes().indexOf(this.id)>-1&&(this.initializeShip(a),this.initializeRapidfire(b))};d.prototype.initializeDefense=function(a){this.metal=a.metal,this.crystal=a.crystal,this.deuterium=a.deuterium,this.attack=a.attack,this.defense=a.defense,this.hull=a.hull,this.capacity=0},d.prototype.initializeShip=function(a){this.metal=a.metal,this.crystal=a.crystal,this.deuterium=a.deuterium,this.attack=a.attack,this.defense=a.defense,this.hull=a.hull,this.capacity=a.capacity},d.prototype.initializeLocation=function(a){this.metal=a.metal,this.crystal=a.crystal,this.deuterium=a.deuterium},d.prototype.initializeRapidfire=function(a){var b,c;if(a[this.id]){b=a[this.id];for(var d in b)b.hasOwnProperty(d)&&(c=b[d],this.rapidFire[d]=1-1/c)}},d.getDefenseTypes=function(){return["401","402","403","404","405","406","407","408"]},d.getShipTypes=function(){return["202","203","204","205","206","207","208","209","210","211","212","213","214","215"]},d.PLANET="1",d.MOON="2",d.DEBRIS="3",b.exports=d},{}],11:[function(a,b,c){var e=(a("./attackstatistics"),function(a,b){this.results=[],this.attackGroup=a,this.defenseGroup=b});e.prototype.init=function(a,b){this.attstats=a,this.dfstats=b,this.update(0)},e.prototype.update=function(a){var b,e,f,c=[],d=[];for(e=0;e<this.attackGroup.fleets.length;e++)b=this.attackGroup.fleets[e],f=b.getStats(),c.push(f);for(e=0;e<this.defenseGroup.fleets.length;e++)b=this.defenseGroup.fleets[e],f=b.getStats(),d.push(f);this.results.push({attack_fleet:{current:c,attack_points:this.attstats.ap,shield_defense:this.attstats.sp,number_of_shoots:this.attstats.sh},defense_fleet:{current:d,attack_points:this.dfstats.ap,shield_defense:this.dfstats.sp,number_of_shoots:this.dfstats.sh},round:a})},b.exports=e},{"./attackstatistics":4}],12:[function(a,b,c){(function(c){var d=a("pretty-hrtime"),e=function(){this.records={}};e.prototype.start=function(a){this.records[a]={start:c.hrtime(),end:null}},e.prototype.end=function(a){return this.records[a]?void(this.records[a].end=c.hrtime(this.records[a].start)):void console.log("Timer "+a+" not available!!")},e.prototype.buildResults=function(){for(var c in this.records)this.records.hasOwnProperty(c)&&(this.records[c].end?(this.records[c].description=d(this.records[c].end,{precise:!0}),delete this.records[c].start,delete this.records[c].end):console.log("Timer "+c+" not closed!!"))},b.exports=e}).call(this,a("_process"))},{_process:1,"pretty-hrtime":2}],13:[function(a,b,c){var d=function(){};d.fillArray=function(a,b){for(var c=[],d=0,d=0;b>d;d++)c.push(a.slice(0));return c},d.calcAverage=function(a){if(!a.length)return 0;if(1==a.length)return a[0];for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length},d.calcStandardDeviation=function(a){if(!a.length)return[0,0];if(1==a.length)return[0,a[0]];for(var e,b=0,c=d.calcAverage(a),f=0;f<a.length;f++)b+=(a[f]-c)*(a[f]-c);return e=1/(a.length-1)*b,[Math.sqrt(e),c]},d.appendToArray=function(a,b,c){for(var d=0;c>d;d++)a.push(b.slice(0))},d.bytesToSize=function(a){if(0===a)return"0 Byte";var b=1e3,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(b));return(a/Math.pow(b,d)).toPrecision(3)+" "+c[d]},b.exports=d},{}]},{},[3]);